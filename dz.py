#this is simple base64 encryption by DEMONIC'S zone.
import base64
exec(base64.b64decode("aW1wb3J0IGFzeW5jaW8KaW1wb3J0IHRpbWUKaW1wb3J0IHJhbmRvbQppbXBvcnQgb3MKaW1wb3J0IHJlcXVlc3RzCmZyb20gdGVsZXRob24uc3luYyBpbXBvcnQgVGVsZWdyYW1DbGllbnQKZnJvbSB0ZWxldGhvbi50bC5mdW5jdGlvbnMuY2hhbm5lbHMgaW1wb3J0IEludml0ZVRvQ2hhbm5lbFJlcXVlc3QKZnJvbSB0ZWxldGhvbi5lcnJvcnMgaW1wb3J0IEZsb29kV2FpdEVycm9yLCBVc2VyQWxyZWFkeVBhcnRpY2lwYW50RXJyb3IKZnJvbSByaWNoLmNvbnNvbGUgaW1wb3J0IENvbnNvbGUKZnJvbSByaWNoLnBhbmVsIGltcG9ydCBQYW5lbApmcm9tIHJpY2gudGFibGUgaW1wb3J0IFRhYmxlCmZyb20gcmljaC5wcm9ncmVzcyBpbXBvcnQgUHJvZ3Jlc3MKZnJvbSByaWNoLmJveCBpbXBvcnQgUk9VTkRFRAoKY29uc29sZSA9IENvbnNvbGUoKQoKIyA9PT09PT09PT09PT09PT09PT09PT09IEFQSSBIRUxQRVIgRlVOQ1RJT05TID09PT09PT09PT09PT09PT09PT09PT0KZGVmIGZldGNoX2FwaV9yZXNwb25zZSh1cmwpOgogICAgdHJ5OgogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KHVybCkKICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkgICMgUmV0dXJuIHBhcnNlZCBKU09OCiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBjb25zb2xlLnByaW50KGYiW2JvbGQgcmVkXUFQSSBFcnJvcjoge2V9Wy9ib2xkIHJlZF0iKQogICAgICAgIHJldHVybiBOb25lCgojID09PT09PT09PT09PT09PT09PT09PT0gUkVESVJFQ1QgJiBBVVRIRU5USUNBVElPTiA9PT09PT09PT09PT09PT09PT09PT09CmRlZiBhdXRoZW50aWNhdGVfdXNlcigpOgogICAgIyBGaXJzdCByZWRpcmVjdCB0byBUZWxlZ3JhbSBjaGFubmVsCiAgICBjb25zb2xlLnByaW50KFBhbmVsLmZpdCgiW2JvbGQgZ3JlZW5dUmVkaXJlY3RpbmcgdG8gVGVsZWdyYW0gY2hhbm5lbC4uLiBJZiBpdHMgbm90IHJlZGlyZWN0aW5nIGF1dG9tYXRpY2FsbHksIHRoZW4gam9pbjogaHR0cHM6Ly90Lm1lLytVdXNuczlxWkh0dzJPV1ExWy9ib2xkIGdyZWVuXSIsIGJveD1ST1VOREVEKSkKICAgIG9zLnN5c3RlbSgieGRnLW9wZW4gaHR0cHM6Ly90Lm1lLytVdXNuczlxWkh0dzJPV1ExIikKICAgIAogICAgIyBBc2sgaWYgdXNlciBoYXMgam9pbmVkCiAgICBqb2luZWQgPSBjb25zb2xlLmlucHV0KCJbYm9sZCB5ZWxsb3ddSGF2ZSB5b3Ugam9pbmVkIHRoZSBUZWxlZ3JhbSBjaGFubmVsPyAoeWVzL25vKTogWy9ib2xkIHllbGxvd10iKS5sb3dlcigpCiAgICBpZiBqb2luZWQgbm90IGluIFsneWVzJywgJ3knXToKICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCByZWRdWW91IG11c3Qgam9pbiB0aGUgY2hhbm5lbCB0byB1c2UgdGhpcyB0b29sLlsvYm9sZCByZWRdIikKICAgICAgICBleGl0KCkKICAgIAogICAgIyBBc2sgZm9yIHBhc3N3b3JkCiAgICBjb25zb2xlLnByaW50KFBhbmVsLmZpdCgiW2JvbGQgY3lhbl1Ob3cgeW91IG5lZWQgdGhlIHBhc3N3b3JkLiBFbnRlciAnWScgdG8gY29udGludWUuIElmIGl0cyBub3QgcmVkaXJlY3RpbmcgdG8gdGhlIHBhc3N3b3JkIHRoZW4gZ28gdG8gaHR0cHM6Ly90Lm1lL2MvMjU5ODY0Nzk3Ny8xMzhbL2JvbGQgY3lhbl0iLCBib3g9Uk9VTkRFRCkpCiAgICBwYXNzd29yZF9wcm9tcHQgPSBjb25zb2xlLmlucHV0KCJbYm9sZCB5ZWxsb3ddRW50ZXIgWSBmb3IgcGFzc3dvcmQ6IFsvYm9sZCB5ZWxsb3ddIikubG93ZXIoKQogICAgaWYgcGFzc3dvcmRfcHJvbXB0ICE9ICd5JzoKICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCByZWRdUGFzc3dvcmQgcHJvbXB0IHJlcXVpcmVkLlsvYm9sZCByZWRdIikKICAgICAgICBleGl0KCkKICAgIAogICAgIyBSZWRpcmVjdCB0byBwYXNzd29yZCBjaGFubmVsCiAgICBvcy5zeXN0ZW0oInhkZy1vcGVuIGh0dHBzOi8vdC5tZS9jLzI1OTg2NDc5NzcvMTM4IikKICAgIHBhc3N3b3JkID0gY29uc29sZS5pbnB1dCgiW2JvbGQgcmVkXUVudGVyIHRoZSBwYXNzd29yZDogWy9ib2xkIHJlZF0iKQogICAgCiAgICAjIFZlcmlmeSBwYXNzd29yZCB0aHJvdWdoIEFQSQogICAgYXBpX3Jlc3BvbnNlID0gZmV0Y2hfYXBpX3Jlc3BvbnNlKCJodHRwczovL3Rjc2RlbW9uaWMudmVyY2VsLmFwcC9hcGkvcmFuZG9tdXNlcnMiKQogICAgaWYgbm90IGFwaV9yZXNwb25zZToKICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCByZWRdRmFpbGVkIHRvIHZlcmlmeSBwYXNzd29yZC4gU2VydmljZSB1bmF2YWlsYWJsZS5bL2JvbGQgcmVkXSIpCiAgICAgICAgZXhpdCgpCiAgICAKICAgIGlmICdwYXNzd29yZHMnIG5vdCBpbiBhcGlfcmVzcG9uc2Ugb3IgcGFzc3dvcmQgbm90IGluIGFwaV9yZXNwb25zZVsncGFzc3dvcmRzJ106CiAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGQgcmVkXUludmFsaWQgcGFzc3dvcmQhIEFjY2VzcyBkZW5pZWQuWy9ib2xkIHJlZF0iKQogICAgICAgIGV4aXQoKQoKIyA9PT09PT09PT09PT09PT09PT09PT09IEdFVCBBUEkgQ1JFREVOVElBTFMgPT09PT09PT09PT09PT09PT09PT09PQpkZWYgZ2V0X2FwaV9jcmVkZW50aWFscygpOgogICAgYXBpX3Jlc3BvbnNlID0gZmV0Y2hfYXBpX3Jlc3BvbnNlKCJodHRwczovL3Rjc2RlbW9uaWMudmVyY2VsLmFwcC9hcGkvZmJpbmZvIikKICAgIGlmIG5vdCBhcGlfcmVzcG9uc2U6CiAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGQgcmVkXUZhaWxlZCB0byBmZXRjaCBBUEkgY3JlZGVudGlhbHMuIFNlcnZpY2UgdW5hdmFpbGFibGUuWy9ib2xkIHJlZF0iKQogICAgICAgIGV4aXQoKQogICAgCiAgICBpZiAnYXBpX2lkJyBub3QgaW4gYXBpX3Jlc3BvbnNlIG9yICdhcGlfaGFzaCcgbm90IGluIGFwaV9yZXNwb25zZToKICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCByZWRdSW52YWxpZCBBUEkgY3JlZGVudGlhbHMgZm9ybWF0IHJlY2VpdmVkLlsvYm9sZCByZWRdIikKICAgICAgICBleGl0KCkKICAgIAogICAgcmV0dXJuIGFwaV9yZXNwb25zZVsnYXBpX2lkJ10sIGFwaV9yZXNwb25zZVsnYXBpX2hhc2gnXQoKIyBbUmVzdCBvZiB0aGUgb3JpZ2luYWwgY29kZSByZW1haW5zIGV4YWN0bHkgdGhlIHNhbWUuLi5dCiMgPT09PT09PT09PT09PT09PT09PT09PSBIRUFERVIgPT09PT09PT09PT09PT09PT09PT09PQpkZWYgZGlzcGxheV9oZWFkZXIoKToKICAgIGhlYWRlciA9ICIiIgouIyMjIyMuLi4jIyMjIyMuLi4uLi4uLi4uIyMjIyMjLi4uIyMjIy4uCi4jIy4uIyMuLi4uLiMjLi4uLi4uLi4uLi4uLiMjLi4uLiMjLi4uLi4KLiMjLi4jIy4uLi4jIy4uLi4jIyMjIyMuLi4uIyMuLi4uIyMuIyMjLgouIyMuLiMjLi4uIyMuLi4uLi4uLi4uLi4uLi4jIy4uLi4jIy4uIyMuCi4jIyMjIy4uLiMjIyMjIy4uLi4uLi4uLi4uLiMjLi4uLi4jIyMjLi4KLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgpodHRwczovL3QubWUvK1V1c25zOXFaSHR3Mk9XUTEKIiIiCiAgICB3YXJuaW5nID0gIltib2xkIHllbGxvd11XQVJOSU5HOlsvYm9sZCB5ZWxsb3ddIEFkZGluZyBtb3JlIHRoYW4gNTAgbWVtYmVycyBwZXIgZGF5IG1heSByZXN1bHQgaW4gYSBiYW4uIgogICAgCiAgICBjb25zb2xlLnByaW50KFBhbmVsLmZpdChoZWFkZXIsIHN0eWxlPSJib2xkIGN5YW4iLCBib3g9Uk9VTkRFRCkpCiAgICBjb25zb2xlLnByaW50KFBhbmVsLmZpdCh3YXJuaW5nLCBzdHlsZT0iYm9sZCByZWQiLCBib3g9Uk9VTkRFRCkpCiAgICBjb25zb2xlLnByaW50KCJcbiIpCgojID09PT09PT09PT09PT09PT09PT09PT0gSU5QVVQgU0VDVElPTiA9PT09PT09PT09PT09PT09PT09PT09CmRlZiBnZXRfaW5wdXRzKGFwaV9pZCwgYXBpX2hhc2gpOgogICAgaW5wdXRzID0gVGFibGUoc2hvd19oZWFkZXI9RmFsc2UsIGJveD1ST1VOREVELCBzdHlsZT0iYm9sZCBibHVlIikKICAgIGlucHV0cy5hZGRfY29sdW1uKCJGaWVsZCIsIHN0eWxlPSJjeWFuIikKICAgIGlucHV0cy5hZGRfY29sdW1uKCJWYWx1ZSIpCiAgICAKICAgIGNvbnNvbGUucHJpbnQoZiJbYm9sZCBjeWFuXUFQSSBJRDogWy9ib2xkIGN5YW5de2FwaV9pZH0iKQogICAgY29uc29sZS5wcmludChmIltib2xkIGN5YW5dQVBJIEhhc2g6IFsvYm9sZCBjeWFuXXthcGlfaGFzaH0iKQogICAgcGhvbmUgPSBjb25zb2xlLmlucHV0KCJbYm9sZCBjeWFuXUVudGVyIHlvdXIgcGhvbmUgbnVtYmVyICh3aXRoIGNvdW50cnkgY29kZSk6IFsvYm9sZCBjeWFuXSIpCiAgICBzb3VyY2VfZ3JvdXAgPSBjb25zb2xlLmlucHV0KCJbYm9sZCBjeWFuXUVudGVyIHRoZSBzb3VyY2UgZ3JvdXAgdXNlcm5hbWUgb3IgSUQ6IFsvYm9sZCBjeWFuXSIpCiAgICBkZXN0aW5hdGlvbl9jaGFubmVsID0gY29uc29sZS5pbnB1dCgiW2JvbGQgY3lhbl1FbnRlciB0aGUgZGVzdGluYXRpb24gY2hhbm5lbCB1c2VybmFtZSBvciBJRDogWy9ib2xkIGN5YW5dIikKICAgIAogICAgaW5wdXRzLmFkZF9yb3coIkFQSSBJRCIsIHN0cihhcGlfaWQpKQogICAgaW5wdXRzLmFkZF9yb3coIkFQSSBIYXNoIiwgIuKAoiIqbGVuKGFwaV9oYXNoKSkKICAgIGlucHV0cy5hZGRfcm93KCJQaG9uZSIsIHBob25lKQogICAgaW5wdXRzLmFkZF9yb3coIlNvdXJjZSBHcm91cCIsIHNvdXJjZV9ncm91cCkKICAgIGlucHV0cy5hZGRfcm93KCJEZXN0aW5hdGlvbiBDaGFubmVsIiwgZGVzdGluYXRpb25fY2hhbm5lbCkKICAgIAogICAgY29uc29sZS5wcmludChQYW5lbC5maXQoaW5wdXRzLCB0aXRsZT0iW2JvbGQgZ3JlZW5dSU5QVVQgREVUQUlMU1svYm9sZCBncmVlbl0iLCBib3g9Uk9VTkRFRCkpCiAgICAKICAgIHJldHVybiBpbnQoYXBpX2lkKSwgYXBpX2hhc2gsIHBob25lLCBzb3VyY2VfZ3JvdXAsIGRlc3RpbmF0aW9uX2NoYW5uZWwKCiMgPT09PT09PT09PT09PT09PT09PT09PSBNT0RFIFNFTEVDVElPTiA9PT09PT09PT09PT09PT09PT09PT09CmRlZiBzZWxlY3RfbW9kZSgpOgogICAgbW9kZV90YWJsZSA9IFRhYmxlKHNob3dfaGVhZGVyPVRydWUsIGJveD1ST1VOREVELCBzdHlsZT0iYm9sZCBtYWdlbnRhIikKICAgIG1vZGVfdGFibGUuYWRkX2NvbHVtbigiT3B0aW9uIiwgc3R5bGU9ImN5YW4iKQogICAgbW9kZV90YWJsZS5hZGRfY29sdW1uKCJEZXNjcmlwdGlvbiIpCiAgICAKICAgIG1vZGVfdGFibGUuYWRkX3JvdygiMSIsICJCeSBhbW91bnQiKQogICAgbW9kZV90YWJsZS5hZGRfcm93KCIyIiwgIkJ5IHBlcmNlbnRhZ2UiKQogICAgCiAgICBjb25zb2xlLnByaW50KFBhbmVsLmZpdChtb2RlX3RhYmxlLCB0aXRsZT0iW2JvbGQgZ3JlZW5dU0VMRUNUIEFERElUSU9OIE1PREVbL2JvbGQgZ3JlZW5dIiwgYm94PVJPVU5ERUQpKQogICAgbW9kZSA9IGNvbnNvbGUuaW5wdXQoIltib2xkIG1hZ2VudGFdRW50ZXIgMSBvciAyOiBbL2JvbGQgbWFnZW50YV0iKQogICAgCiAgICB0YXJnZXRfY291bnQgPSAtMQogICAgcGVyY2VudCA9IDAKICAgIAogICAgaWYgbW9kZSA9PSAnMSc6CiAgICAgICAgYW1vdW50X3RhYmxlID0gVGFibGUoc2hvd19oZWFkZXI9VHJ1ZSwgYm94PVJPVU5ERUQsIHN0eWxlPSJib2xkIHllbGxvdyIpCiAgICAgICAgYW1vdW50X3RhYmxlLmFkZF9jb2x1bW4oIk9wdGlvbiIsIHN0eWxlPSJjeWFuIikKICAgICAgICBhbW91bnRfdGFibGUuYWRkX2NvbHVtbigiQW1vdW50IikKICAgICAgICAKICAgICAgICBhbW91bnRfbWFwID0geycxJzogMTAsICcyJzogMzAsICczJzogNTAsICc0JzogNzAsICc1JzogMTAwfQogICAgICAgIGFtb3VudF90YWJsZS5hZGRfcm93KCIxIiwgIjEwIikKICAgICAgICBhbW91bnRfdGFibGUuYWRkX3JvdygiMiIsICIzMCIpCiAgICAgICAgYW1vdW50X3RhYmxlLmFkZF9yb3coIjMiLCAiNTAiKQogICAgICAgIGFtb3VudF90YWJsZS5hZGRfcm93KCI0IiwgIjcwIikKICAgICAgICBhbW91bnRfdGFibGUuYWRkX3JvdygiNSIsICIxMDAiKQogICAgICAgIAogICAgICAgIGNvbnNvbGUucHJpbnQoUGFuZWwuZml0KGFtb3VudF90YWJsZSwgdGl0bGU9Iltib2xkIGdyZWVuXVNFTEVDVCBBTU9VTlRbL2JvbGQgZ3JlZW5dIiwgYm94PVJPVU5ERUQpKQogICAgICAgIGFtb3VudF9jaG9pY2UgPSBjb25zb2xlLmlucHV0KCJbYm9sZCB5ZWxsb3ddRW50ZXIgY2hvaWNlIG51bWJlcjogWy9ib2xkIHllbGxvd10iKQogICAgICAgIHRhcmdldF9jb3VudCA9IGFtb3VudF9tYXAuZ2V0KGFtb3VudF9jaG9pY2UsIDEwKQogICAgZWxpZiBtb2RlID09ICcyJzoKICAgICAgICBwZXJjZW50X3RhYmxlID0gVGFibGUoc2hvd19oZWFkZXI9VHJ1ZSwgYm94PVJPVU5ERUQsIHN0eWxlPSJib2xkIHllbGxvdyIpCiAgICAgICAgcGVyY2VudF90YWJsZS5hZGRfY29sdW1uKCJPcHRpb24iLCBzdHlsZT0iY3lhbiIpCiAgICAgICAgcGVyY2VudF90YWJsZS5hZGRfY29sdW1uKCJQZXJjZW50YWdlIikKICAgICAgICAKICAgICAgICBwZXJjZW50X21hcCA9IHsnMSc6IDEwLCAnMic6IDMwLCAnMyc6IDUwLCAnNCc6IDcwLCAnNSc6IDEwMH0KICAgICAgICBwZXJjZW50X3RhYmxlLmFkZF9yb3coIjEiLCAiMTAlIikKICAgICAgICBwZXJjZW50X3RhYmxlLmFkZF9yb3coIjIiLCAiMzAlIikKICAgICAgICBwZXJjZW50X3RhYmxlLmFkZF9yb3coIjMiLCAiNTAlIikKICAgICAgICBwZXJjZW50X3RhYmxlLmFkZF9yb3coIjQiLCAiNzAlIikKICAgICAgICBwZXJjZW50X3RhYmxlLmFkZF9yb3coIjUiLCAiMTAwJSIpCiAgICAgICAgCiAgICAgICAgY29uc29sZS5wcmludChQYW5lbC5maXQocGVyY2VudF90YWJsZSwgdGl0bGU9Iltib2xkIGdyZWVuXVNFTEVDVCBQRVJDRU5UQUdFWy9ib2xkIGdyZWVuXSIsIGJveD1ST1VOREVEKSkKICAgICAgICBwZXJjZW50X2Nob2ljZSA9IGNvbnNvbGUuaW5wdXQoIltib2xkIHllbGxvd11FbnRlciBjaG9pY2UgbnVtYmVyOiBbL2JvbGQgeWVsbG93XSIpCiAgICAgICAgcGVyY2VudCA9IHBlcmNlbnRfbWFwLmdldChwZXJjZW50X2Nob2ljZSwgMTApCiAgICAKICAgIHJldHVybiB0YXJnZXRfY291bnQsIHBlcmNlbnQKCiMgPT09PT09PT09PT09PT09PT09PT09PSBNRU1CRVIgU0hVRkZMSU5HID09PT09PT09PT09PT09PT09PT09PT0KZGVmIHNodWZmbGVfbWVtYmVycyhwYXJ0aWNpcGFudHMsIGFkZGVkX3VzZXJzLCBza2lwcGVkX3VzZXJzKToKICAgICMgU2VwYXJhdGUgYWRkZWQvc2tpcHBlZCB1c2VycyBmcm9tIG5ldyBvbmVzCiAgICBhZGRlZF9pZHMgPSB7dS5pZCBmb3IgdSBpbiBhZGRlZF91c2Vyc30KICAgIHNraXBwZWRfaWRzID0ge3UuaWQgZm9yIHUgaW4gc2tpcHBlZF91c2Vyc30KICAgIAogICAgbmV3X3VzZXJzID0gW3UgZm9yIHUgaW4gcGFydGljaXBhbnRzIGlmIHUuaWQgbm90IGluIGFkZGVkX2lkcyBhbmQgdS5pZCBub3QgaW4gc2tpcHBlZF9pZHNdCiAgICByYW5kb20uc2h1ZmZsZShuZXdfdXNlcnMpCiAgICAKICAgICMgUHV0IHNraXBwZWQgdXNlcnMgYXQgdGhlIGJlZ2lubmluZyAodGhleSBnZXQgcHJpb3JpdHkpCiAgICBza2lwcGVkX3VzZXJzX2xpc3QgPSBbdSBmb3IgdSBpbiBwYXJ0aWNpcGFudHMgaWYgdS5pZCBpbiBza2lwcGVkX2lkc10KICAgIHJhbmRvbS5zaHVmZmxlKHNraXBwZWRfdXNlcnNfbGlzdCkKICAgIAogICAgcmV0dXJuIHNraXBwZWRfdXNlcnNfbGlzdCArIG5ld191c2VycwoKIyA9PT09PT09PT09PT09PT09PT09PT09IE1BSU4gRlVOQ1RJT04gPT09PT09PT09PT09PT09PT09PT09PQphc3luYyBkZWYgbWFpbigpOgogICAgIyBBdXRoZW50aWNhdGlvbiBmbG93CiAgICBhdXRoZW50aWNhdGVfdXNlcigpCiAgICAKICAgICMgR2V0IEFQSSBjcmVkZW50aWFscyBhdXRvbWF0aWNhbGx5CiAgICBhcGlfaWQsIGFwaV9oYXNoID0gZ2V0X2FwaV9jcmVkZW50aWFscygpCiAgICAKICAgICMgRGlzcGxheSBoZWFkZXIgYW5kIGdldCBpbnB1dHMKICAgIGRpc3BsYXlfaGVhZGVyKCkKICAgIGFwaV9pZCwgYXBpX2hhc2gsIHBob25lLCBzb3VyY2VfZ3JvdXAsIGRlc3RpbmF0aW9uX2NoYW5uZWwgPSBnZXRfaW5wdXRzKGFwaV9pZCwgYXBpX2hhc2gpCiAgICB0YXJnZXRfY291bnQsIHBlcmNlbnQgPSBzZWxlY3RfbW9kZSgpCiAgICAKICAgIGFkZGVkX3VzZXJzID0gW10KICAgIHNraXBwZWRfdXNlcnMgPSBbXQoKICAgIGFzeW5jIHdpdGggVGVsZWdyYW1DbGllbnQocGhvbmUsIGFwaV9pZCwgYXBpX2hhc2gpIGFzIGNsaWVudDoKICAgICAgICBjb25zb2xlLnByaW50KFBhbmVsLmZpdCgiW2JvbGQgZ3JlZW5dRmV0Y2hpbmcgcGFydGljaXBhbnRzLi4uWy9ib2xkIGdyZWVuXSIsIGJveD1ST1VOREVEKSkKICAgICAgICAKICAgICAgICBwYXJ0aWNpcGFudHMgPSBbXQogICAgICAgIGFzeW5jIGZvciB1c2VyIGluIGNsaWVudC5pdGVyX3BhcnRpY2lwYW50cyhzb3VyY2VfZ3JvdXApOgogICAgICAgICAgICBwYXJ0aWNpcGFudHMuYXBwZW5kKHVzZXIpCgogICAgICAgIGlmIHBlcmNlbnQ6CiAgICAgICAgICAgIHRhcmdldF9jb3VudCA9IGludChsZW4ocGFydGljaXBhbnRzKSAqIHBlcmNlbnQgLyAxMDApCgogICAgICAgIGluZm9fdGFibGUgPSBUYWJsZShzaG93X2hlYWRlcj1GYWxzZSwgYm94PVJPVU5ERUQsIHN0eWxlPSJib2xkIGJsdWUiKQogICAgICAgIGluZm9fdGFibGUuYWRkX2NvbHVtbigiTWV0cmljIiwgc3R5bGU9ImN5YW4iKQogICAgICAgIGluZm9fdGFibGUuYWRkX2NvbHVtbigiVmFsdWUiKQogICAgICAgIGluZm9fdGFibGUuYWRkX3JvdygiVG90YWwgbWVtYmVycyBpbiBncm91cCIsIHN0cihsZW4ocGFydGljaXBhbnRzKSkpCiAgICAgICAgaW5mb190YWJsZS5hZGRfcm93KCJUYXJnZXQgdG8gYWRkIiwgc3RyKHRhcmdldF9jb3VudCkpCiAgICAgICAgCiAgICAgICAgY29uc29sZS5wcmludChQYW5lbC5maXQoaW5mb190YWJsZSwgdGl0bGU9Iltib2xkIGdyZWVuXUdST1VQIFNUQVRJU1RJQ1NbL2JvbGQgZ3JlZW5dIiwgYm94PVJPVU5ERUQpKQogICAgICAgIGNvbnNvbGUucHJpbnQoIlxuIikKCiAgICAgICAgYWRkZWQgPSAwCiAgICAgICAgYXR0ZW1wdF9jb3VudCA9IDAKICAgICAgICBtYXhfYXR0ZW1wdHMgPSBsZW4ocGFydGljaXBhbnRzKSAqIDIgICMgUHJldmVudCBpbmZpbml0ZSBsb29wcwogICAgICAgIAogICAgICAgIHdpdGggUHJvZ3Jlc3MoKSBhcyBwcm9ncmVzczoKICAgICAgICAgICAgdGFzayA9IHByb2dyZXNzLmFkZF90YXNrKCJbY3lhbl1BZGRpbmcgbWVtYmVycy4uLiIsIHRvdGFsPXRhcmdldF9jb3VudCkKICAgICAgICAgICAgCiAgICAgICAgICAgIHdoaWxlIGFkZGVkIDwgdGFyZ2V0X2NvdW50IGFuZCBhdHRlbXB0X2NvdW50IDwgbWF4X2F0dGVtcHRzOgogICAgICAgICAgICAgICAgYXR0ZW1wdF9jb3VudCArPSAxCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgU2h1ZmZsZSBtZW1iZXJzIHdpdGggcHJpb3JpdHkgdG8gbm9uLWFkZGVkIG9uZXMKICAgICAgICAgICAgICAgIHNodWZmbGVkX21lbWJlcnMgPSBzaHVmZmxlX21lbWJlcnMocGFydGljaXBhbnRzLCBhZGRlZF91c2Vycywgc2tpcHBlZF91c2VycykKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZm9yIHVzZXIgaW4gc2h1ZmZsZWRfbWVtYmVyczoKICAgICAgICAgICAgICAgICAgICBpZiBhZGRlZCA+PSB0YXJnZXRfY291bnQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgIyBDaGVjayBpZiB1c2VyIGlzIGFscmVhZHkgaW4gY2hhbm5lbAogICAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmb3IgbWVtYmVyIGluIGNsaWVudC5pdGVyX3BhcnRpY2lwYW50cyhkZXN0aW5hdGlvbl9jaGFubmVsKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1lbWJlci5pZCA9PSB1c2VyLmlkOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFVzZXJBbHJlYWR5UGFydGljaXBhbnRFcnJvcih1c2VyLmlkKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuY29uc29sZS5wcmludChmIltib2xkXUFkZGluZyBbY3lhbl17dXNlci5maXJzdF9uYW1lIG9yIHVzZXIudXNlcm5hbWUgb3IgJ1Vua25vd24nfVsvY3lhbl0uLi5bL2JvbGRdIikKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xpZW50KEludml0ZVRvQ2hhbm5lbFJlcXVlc3QoZGVzdGluYXRpb25fY2hhbm5lbCwgW3VzZXJdKSkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuY29uc29sZS5wcmludChmIltncmVlbl3inJMgQWRkZWQge3VzZXIuaWR9Wy9ncmVlbl0iKQogICAgICAgICAgICAgICAgICAgICAgICBhZGRlZF91c2Vycy5hcHBlbmQodXNlcikKICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWQgKz0gMQogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUodGFzaywgYWR2YW5jZT0xKQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKDQwKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBVc2VyQWxyZWFkeVBhcnRpY2lwYW50RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmNvbnNvbGUucHJpbnQoZiJbeWVsbG93XeKaoCBTa2lwcGVkIHt1c2VyLmlkfTogQWxyZWFkeSBpbiBjaGFubmVsLlsveWVsbG93XSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHVzZXIgbm90IGluIHNraXBwZWRfdXNlcnM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwcGVkX3VzZXJzLmFwcGVuZCh1c2VyKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBGbG9vZFdhaXRFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5jb25zb2xlLnByaW50KGYiW3JlZF3ijJsgRmxvb2Qgd2FpdCBmb3Ige2Uuc2Vjb25kc30gc2Vjb25kcy5bL3JlZF0iKQogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKGUuc2Vjb25kcykKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmNvbnNvbGUucHJpbnQoZiJbcmVkXeKclyBGYWlsZWQgdG8gYWRkIHt1c2VyLmlkfToge2V9Wy9yZWRdIikKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgIyA9PT09PT09PT09PT09PT09PT09PT09IFNVTU1BUlkgPT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIHN1bW1hcnlfdGFibGUgPSBUYWJsZSh0aXRsZT0iW2JvbGQgZ3JlZW5dU1VNTUFSWVsvYm9sZCBncmVlbl0iLCBib3g9Uk9VTkRFRCwgc3R5bGU9ImJvbGQgYmx1ZSIpCiAgICAgICAgc3VtbWFyeV90YWJsZS5hZGRfY29sdW1uKCJNZXRyaWMiLCBzdHlsZT0iY3lhbiIpCiAgICAgICAgc3VtbWFyeV90YWJsZS5hZGRfY29sdW1uKCJWYWx1ZSIsIHN0eWxlPSJncmVlbiIpCiAgICAgICAgCiAgICAgICAgc3VtbWFyeV90YWJsZS5hZGRfcm93KCJUb3RhbCBNZW1iZXJzIGluIFNvdXJjZSBHcm91cCIsIHN0cihsZW4ocGFydGljaXBhbnRzKSkpCiAgICAgICAgc3VtbWFyeV90YWJsZS5hZGRfcm93KCJUYXJnZXQgdG8gQWRkIiwgc3RyKHRhcmdldF9jb3VudCkpCiAgICAgICAgc3VtbWFyeV90YWJsZS5hZGRfcm93KCJTdWNjZXNzZnVsbHkgQWRkZWQiLCBzdHIobGVuKGFkZGVkX3VzZXJzKSkpCiAgICAgICAgc3VtbWFyeV90YWJsZS5hZGRfcm93KCJTa2lwcGVkIChBbHJlYWR5IFByZXNlbnQpIiwgc3RyKGxlbihza2lwcGVkX3VzZXJzKSkpCiAgICAgICAgc3VtbWFyeV90YWJsZS5hZGRfcm93KCJBdHRlbXB0cyBNYWRlIiwgc3RyKGF0dGVtcHRfY291bnQpKQogICAgICAgIAogICAgICAgIGNvbnNvbGUucHJpbnQoUGFuZWwuZml0KHN1bW1hcnlfdGFibGUsIGJveD1ST1VOREVEKSkKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBhc3luY2lvLmdldF9ldmVudF9sb29wKCkucnVuX3VudGlsX2NvbXBsZXRlKG1haW4oKSk=").decode('utf-8'))
